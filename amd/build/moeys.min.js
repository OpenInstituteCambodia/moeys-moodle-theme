const logger=window.console.log;define(["jquery","core/log"],function(a,b){"use strict";function c(){b.debug("MoEYS AMD init");const a=axios.create({baseURL:"/theme/jquery.php/theme_"+M.cfg.theme+"/moeys/json/"});return{request:a,data:{provinces:[],districts:[],schools:[]},log:logger}}function d(b){var c=[a("<option>").val("").text("Choose an option")];return b.forEach(function(b){var d=a("<option>").val(b.id).text(b.name);c.push(d)}),c}return b.debug("MoEYS AMD"),{init:function(){function b(){const b=c();window.MoEYS=b;const e="#id_profile_field_school_province_id",f="#id_profile_field_school_district_id",g="#id_profile_field_school_id";if(0===a(e).length)return void b.log("MoEYS","Failed to initialized");const h=a(e).val(),i=a(f).val(),j=a(g).val();b.log("MoEYS User School",{province_id:h,district_id:i,school_id:j}),a(e).on("change",function(c){b.log("MoEYS",{type:"PROVINCE_INPUT_ID",event:c});const e=a(c.target).val(),g=b.data.districts.filter(function(a){return a.province_id==e});b.log("districtList",g);const h=d(g);a(f)[0].options.length=0,a(f).append(h)}),a(f).on("change",function(c){b.log("MoEYS",{type:"DISTRICT_INPUT_ID",event:c});const e=a(c.target).val();b.request.get("/district/"+e+".json").then(function(c){b.data.schools=c.data;const e=d(c.data.schools);return a(g)[0].options.length=0,a(g).append(e),e}).then(function(){j&&a(g).val(j)})}),b.request.get("provinces.json").then(function(c){b.log("MoEYS","Getting provinces data"),b.data.provinces=c.data;const f=d(c.data);return a(e)[0].options.length=0,a(e).append(f),!0}).then(function(){return b.request.get("districts.json").then(function(a){b.log("MoEYS","Getting districts data"),b.data.districts=a.data})}).then(function(){b.log("MoEYS","Set default school data"),h&&a(e).val(h).trigger("change"),i&&a(f).val(i).trigger("change")})}a(document).ready(b)}}});